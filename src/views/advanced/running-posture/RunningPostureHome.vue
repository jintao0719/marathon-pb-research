<template>
  <div class="running-posture-home">
    <div class="container">
      <!-- è¿”å›å¯¼èˆª -->
      <div class="back-nav">
        <router-link to="/advanced" class="back-link">
          <span class="back-icon">â†</span>
          <span>è¿”å›è¿›é˜¶ä¸“åŒº</span>
        </router-link>
      </div>

      <h1 class="page-title">è·‘æ­¥ç»æµæ€§è·‘å§¿åˆ†æ</h1>
      <p class="page-subtitle">ç§‘å­¦è·‘å§¿é»„é‡‘æ ‡å‡† Â· é›¶æˆæœ¬è‡ªæµ‹æ–¹æ³• Â· ç²¾å‡†è°ƒæ•´æ–¹æ¡ˆ</p>

      <!-- æ ¸å¿ƒå®šä¹‰ -->
      <div class="definition-card">
        <div class="definition-icon">ğŸ’¡</div>
        <div class="definition-content">
          <h3>è·‘æ­¥ç»æµæ€§çš„æ ¸å¿ƒ</h3>
          <p>ç›¸åŒé…é€Ÿä¸‹ï¼Œèº«ä½“<span class="highlight">èƒ½é‡æ¶ˆè€—æœ€ä½</span>ã€<span class="highlight">å…³èŠ‚è´Ÿè·æœ€å°</span>ã€<span class="highlight">åŠ¨ä½œå¯æŒç»­æ€§æœ€å¼º</span>çš„è·‘æ­¥æ¨¡å¼ã€‚ä¸å­˜åœ¨ç»å¯¹ç»Ÿä¸€çš„"å®Œç¾è·‘å§¿"ï¼Œä½†æœ‰åŸºäºè¿åŠ¨ç”Ÿç‰©åŠ›å­¦çš„é€šç”¨é»„é‡‘æ ‡å‡†ã€‚</p>
        </div>
      </div>

      <!-- é»„é‡‘æ ‡å‡† -->
      <div class="standards-section">
        <h2 class="section-title">
          <span class="section-icon">ğŸ†</span>
          æœ€ç»æµè·‘æ­¥å§¿åŠ¿çš„é»„é‡‘æ ‡å‡†
        </h2>

        <div class="standards-grid">
          <div v-for="(standard, index) in goldenStandards" :key="index" class="standard-card">
            <div class="standard-header">
              <span class="standard-icon">{{ standard.icon }}</span>
              <h3>{{ standard.title }}</h3>
            </div>
            <div class="standard-body">
              <div class="core-standard">
                <h4>æ ¸å¿ƒæ ‡å‡†</h4>
                <p>{{ standard.standard }}</p>
              </div>
              <div class="biomechanics">
                <h4>ç”Ÿç‰©åŠ›å­¦é€»è¾‘</h4>
                <p>{{ standard.biomechanics }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- è·‘å§¿è‡ªæµ‹è¯„ä¼° -->
      <div class="assessment-section">
        <h2 class="section-title">
          <span class="section-icon">ğŸ“±</span>
          è·‘å§¿è‡ªæµ‹è¯„ä¼°
        </h2>
        <p class="section-desc">æ ¹æ®æ‚¨çš„è·‘æ­¥æ„Ÿå—å’Œæ•°æ®åˆ†æï¼Œå¿«é€Ÿå®šä½å¯èƒ½çš„è·‘å§¿é—®é¢˜</p>

        <div class="assessment-form">
          <div class="question-group">
            <h3 class="question-title">1. è·‘æ­¥åå“ªé‡Œæœ€å…ˆå‡ºç°é…¸ç—›/ç–¼ç—›ï¼Ÿ</h3>
            <div class="options">
              <label v-for="(option, idx) in painOptions" :key="idx" class="option-item">
                <input type="radio" v-model="assessment.painLocation" :value="option.value" />
                <span>{{ option.label }}</span>
              </label>
            </div>
          </div>

          <div class="question-group">
            <h3 class="question-title">2. æ‚¨çš„æ­¥é¢‘æƒ…å†µå¦‚ä½•ï¼Ÿ</h3>
            <div class="options">
              <label class="option-item">
                <input type="radio" v-model="assessment.cadence" value="low" />
                <span>&lt;165æ­¥/åˆ†é’Ÿï¼Œæ­¥å¹…è¿‡å¤§</span>
              </label>
              <label class="option-item">
                <input type="radio" v-model="assessment.cadence" value="normal" />
                <span>165-175æ­¥/åˆ†é’Ÿ</span>
              </label>
              <label class="option-item">
                <input type="radio" v-model="assessment.cadence" value="good" />
                <span>â‰¥180æ­¥/åˆ†é’Ÿ</span>
              </label>
              <label class="option-item">
                <input type="radio" v-model="assessment.cadence" value="unknown" />
                <span>ä¸æ¸…æ¥š/æœªæµ‹é‡</span>
              </label>
            </div>
          </div>

          <div class="question-group">
            <h3 class="question-title">3. è·‘æ­¥æ—¶çš„èº«ä½“æ„Ÿå—ï¼Ÿ</h3>
            <div class="options">
              <label class="option-item">
                <input type="radio" v-model="assessment.feeling" value="bumpy" />
                <span>èº«ä½“ä¸Šä¸‹é¢ ç°¸ä¸¥é‡ï¼Œåƒ"è¹¦è¹¦è·³è·³"</span>
              </label>
              <label class="option-item">
                <input type="radio" v-model="assessment.feeling" value="unstable" />
                <span>èº«ä½“å·¦å³æ™ƒåŠ¨ï¼Œæ ¸å¿ƒä¸ç¨³</span>
              </label>
              <label class="option-item">
                <input type="radio" v-model="assessment.feeling" value="tense" />
                <span>è‚©é¢ˆç´§ç»·ï¼Œå‘¼å¸ä¸ç•…</span>
              </label>
              <label class="option-item">
                <input type="radio" v-model="assessment.feeling" value="smooth" />
                <span>åŠ¨ä½œæµç•…ï¼Œä½“æ„Ÿè½»æ¾</span>
              </label>
            </div>
          </div>

          <div class="question-group">
            <h3 class="question-title">4. é•¿è·ç¦»ååŠç¨‹è¡¨ç°ï¼Ÿ</h3>
            <div class="options">
              <label class="option-item">
                <input type="radio" v-model="assessment.longRun" value="form" />
                <span>è·‘å§¿ä¸¥é‡å˜å½¢ï¼Œæ ¸å¿ƒå®å¡Œ</span>
              </label>
              <label class="option-item">
                <input type="radio" v-model="assessment.longRun" value="knee" />
                <span>è†ç›–ä¸é€‚ï¼Œæ„Ÿè§‰æ‰¿å—å†²å‡»</span>
              </label>
              <label class="option-item">
                <input type="radio" v-model="assessment.longRun" value="maintain" />
                <span>èƒ½ç»´æŒè·‘å§¿ï¼Œä½†æ¯”è¾ƒè´¹åŠ›</span>
              </label>
              <label class="option-item">
                <input type="radio" v-model="assessment.longRun" value="good" />
                <span>è·‘å§¿ç¨³å®šï¼Œè¶Šè·‘è¶Šé¡º</span>
              </label>
            </div>
          </div>

          <button @click="analyzePosture" class="btn btn-primary btn-analyze">
            åˆ†æè·‘å§¿é—®é¢˜
          </button>
        </div>

        <!-- åˆ†æç»“æœ -->
        <div v-if="analysisResult" class="analysis-result">
          <h3 class="result-title">å¯èƒ½çš„è·‘å§¿é—®é¢˜</h3>
          <div class="result-list">
            <div
              v-for="(result, index) in analysisResult"
              :key="index"
              class="result-item"
              @click="goToDetail(result.id)"
            >
              <span class="result-icon">{{ result.icon }}</span>
              <div class="result-info">
                <h4>{{ result.name }}</h4>
                <p>{{ result.matchReason }}</p>
              </div>
              <span class="match-rate">åŒ¹é…åº¦ {{ result.matchRate }}%</span>
              <span class="arrow">â†’</span>
            </div>
          </div>
        </div>
      </div>

      <!-- é›¶æˆæœ¬è‡ªæµ‹æ–¹æ³• -->
      <div class="selftest-section">
        <h2 class="section-title">
          <span class="section-icon">ğŸ“¹</span>
          é›¶æˆæœ¬è‡ªæˆ‘è·‘å§¿åˆ†æï¼ˆ3æ­¥å®Œæˆï¼‰
        </h2>

        <div class="steps-container">
          <div class="step-card">
            <div class="step-number">1</div>
            <h3>é™æ€åŸºç¡€è¯„ä¼°</h3>
            <p class="step-desc">æ’æŸ¥å…ˆå¤©/ä½“æ€æ ¹æºé—®é¢˜</p>
            <div class="step-detail">
              <p><strong>æ“ä½œæ–¹æ³•ï¼š</strong>è‡ªç„¶ç«™ç«‹ï¼ŒåŒè„šä¸è‚©åŒå®½ï¼Œå…¨èº«æ”¾æ¾ï¼Œç”¨æ‰‹æœºæ­£é¢ã€ä¾§é¢ã€èƒŒé¢å„æ‹1å¼ å…¨èº«ç…§</p>
              <div class="check-items">
                <h4>æ ¸å¿ƒåˆ†æç»´åº¦ï¼š</h4>
                <ul>
                  <li><strong>æ­£é¢ï¼š</strong>æ˜¯å¦æœ‰é«˜ä½è‚©ã€éª¨ç›†é«˜ä½ä¸ä¸€ã€è†ç›–å†…æ‰£/å¤–æ’‡ã€è¶³å†…ç¿»/å¤–ç¿»</li>
                  <li><strong>ä¾§é¢ï¼š</strong>æ˜¯å¦æœ‰éª¨ç›†å‰å€¾/åå€¾ã€å«èƒ¸é©¼èƒŒã€å¤´å‰ä¼¸ã€è†ç›–è¶…ä¼¸</li>
                  <li><strong>èƒŒé¢ï¼š</strong>æ˜¯å¦æœ‰è„ŠæŸ±ä¾§å¼¯ã€éª¨ç›†æ—‹è½¬ã€è¶³å¼“å¡Œé™·</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="step-card">
            <div class="step-number">2</div>
            <h3>åŠ¨æ€æ…¢åŠ¨ä½œæ‹æ‘„</h3>
            <p class="step-desc">æ ¸å¿ƒç¯èŠ‚ï¼Œå¤šè§’åº¦æ‹æ‘„</p>
            <div class="step-detail">
              <p><strong>æ“ä½œæ–¹æ³•ï¼š</strong>æ‰‹æœºå¼€å¯240fpsæ…¢åŠ¨ä½œæ¨¡å¼ï¼Œåˆ†åˆ«åœ¨ä¾§é¢ã€æ­£é¢ã€èƒŒé¢ä¸‰ä¸ªè§’åº¦ï¼Œæ‹æ‘„æ—¥å¸¸è®­ç»ƒé…é€Ÿä¸‹çš„å¹³åœ°è·‘æ­¥ï¼ˆå•æ¬¡10-20ç±³ï¼Œé‡å¤3-5æ¬¡ï¼‰</p>
              <div class="check-items">
                <h4>æ ¸å¿ƒåˆ†æç»´åº¦ï¼š</h4>
                <ul>
                  <li><strong>ä¾§é¢è§†è§’ï¼ˆæœ€å…³é”®ï¼‰ï¼š</strong>è½åœ°ç‚¹æ˜¯å¦åœ¨é‡å¿ƒæ­£ä¸‹æ–¹ã€æ˜¯å¦æœ‰è·¨æ­¥åˆ¹è½¦ã€èº¯å¹²å‰å€¾è§’åº¦ã€å‚ç›´æŒ¯å¹…ã€å°è…¿æŠ˜å ç¨‹åº¦ã€è§¦åœ°æ¨¡å¼</li>
                  <li><strong>æ­£é¢è§†è§’ï¼š</strong>æ‘†è‡‚æ˜¯å¦è¿‡ä¸­çº¿ã€è†ç›–æ˜¯å¦å†…æ‰£/å¤–æ’‡ã€è„šå°–æ˜¯å¦æœæ­£å‰æ–¹ã€èº«ä½“æ˜¯å¦å·¦å³æ™ƒåŠ¨</li>
                  <li><strong>èƒŒé¢è§†è§’ï¼š</strong>éª¨ç›†æ˜¯å¦æ—‹è½¬ã€æ˜¯å¦æœ‰è¶³å†…ç¿»/å¤–ç¿»ã€è½åœ°æ—¶æ˜¯å¦é‡å¿ƒåç§»</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="step-card">
            <div class="step-number">3</div>
            <h3>ä½“æ„Ÿ+æ•°æ®äº¤å‰éªŒè¯</h3>
            <p class="step-desc">ç»“åˆæ—¥å¸¸è·‘æ­¥å®šä½é—®é¢˜</p>
            <div class="step-detail">
              <p><strong>æ“ä½œæ–¹æ³•ï¼š</strong>ç»“åˆæ—¥å¸¸è·‘æ­¥çš„ä½“æ„Ÿã€è¿åŠ¨æ‰‹è¡¨çš„æ ¸å¿ƒæ•°æ®ï¼Œäº¤å‰å®šä½è·‘å§¿é—®é¢˜</p>
              <div class="check-items">
                <h4>æ ¸å¿ƒåˆ†æç»´åº¦ï¼š</h4>
                <ul>
                  <li><strong>ä½“æ„Ÿç»´åº¦ï¼š</strong>è·‘æ­¥åå“ªé‡Œæœ€å…ˆé…¸ç—›/ç–¼ç—›ï¼Ÿè…°è…¹é…¸ç—›â†’æ ¸å¿ƒä¸ç¨³ï¼›è†ç›–å†…ä¾§ç—›â†’è†å†…æ‰£ï¼›å°è…¿å‰ä¾§é…¸ç—›â†’è·¨æ­¥åˆ¹è½¦ï¼›è‚©é¢ˆé…¸ç—›â†’ä¸ŠåŠèº«/æ‘†è‡‚ç´§å¼ </li>
                  <li><strong>æ•°æ®ç»´åº¦ï¼š</strong>é‡ç‚¹çœ‹æ­¥é¢‘ã€è§¦åœ°æ—¶é—´ã€å‚ç›´æŒ¯å¹…ã€å‚ç›´æ­¥å¹…æ¯”ï¼ˆä¼˜ç§€è·‘è€…&lt;6%ï¼Œå¤§ä¼—è·‘è€…éœ€æ§åˆ¶åœ¨7%ä»¥å†…ï¼‰ã€å·¦å³å¹³è¡¡</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 6å¤§é”™è¯¯è·‘å§¿ç±»å‹ -->
      <div class="errors-section">
        <h2 class="section-title">
          <span class="section-icon">âš ï¸</span>
          6å¤§å¸¸è§é”™è¯¯è·‘å§¿ç±»å‹
        </h2>

        <div class="errors-grid">
          <div
            v-for="error in errorTypes"
            :key="error.id"
            class="error-card"
            @click="goToDetail(error.id)"
          >
            <div class="error-header">
              <span class="error-icon">{{ error.icon }}</span>
              <h3>{{ error.name }}</h3>
              <span :class="['risk-badge', error.risk]">{{ error.riskText }}</span>
            </div>
            <p class="error-short-desc">{{ error.shortDesc }}</p>
            <div class="error-symptoms">
              <strong>å…¸å‹ç‰¹å¾ï¼š</strong>
              <span v-for="(symptom, idx) in error.symptoms" :key="idx" class="symptom-tag">{{ symptom }}</span>
            </div>
            <div class="card-arrow">â†’</div>
          </div>
        </div>
      </div>

      <!-- é»„é‡‘åŸåˆ™ -->
      <div class="principles-section">
        <h2 class="section-title">
          <span class="section-icon">ğŸ‘‘</span>
          è·‘å§¿ä¼˜åŒ–çš„æ ¸å¿ƒé»„é‡‘åŸåˆ™
        </h2>
        <div class="principles-list">
          <div v-for="(principle, index) in goldenPrinciples" :key="index" class="principle-item">
            <span class="principle-number">{{ index + 1 }}</span>
            <div class="principle-content">
              <h4>{{ principle.title }}</h4>
              <p>{{ principle.desc }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, reactive } from 'vue'
import { useRouter } from 'vue-router'

const router = useRouter()

// è‡ªæµ‹è¯„ä¼°æ•°æ®
const assessment = reactive({
  painLocation: '',
  cadence: '',
  feeling: '',
  longRun: ''
})

const analysisResult = ref(null)

// ç–¼ç—›é€‰é¡¹
const painOptions = [
  { value: 'waist', label: 'è…°è…¹é…¸ç—› â†’ æ ¸å¿ƒä¸ç¨³' },
  { value: 'knee', label: 'è†ç›–å†…ä¾§ç—› â†’ è†å†…æ‰£' },
  { value: 'shin', label: 'å°è…¿å‰ä¾§é…¸ç—› â†’ è·¨æ­¥åˆ¹è½¦' },
  { value: 'shoulder', label: 'è‚©é¢ˆé…¸ç—› â†’ ä¸ŠåŠèº«/æ‘†è‡‚ç´§å¼ ' },
  { value: 'foot', label: 'è¶³åº•/è¶³è·Ÿç—› â†’ è§¦åœ°æ¨¡å¼é—®é¢˜' },
  { value: 'none', label: 'æ— æ˜æ˜¾ç–¼ç—›' }
]

// é»„é‡‘æ ‡å‡†
const goldenStandards = [
  {
    icon: 'ğŸ¯',
    title: 'èº¯å¹²ä¸æ ¸å¿ƒ',
    standard: 'èº«ä½“ä»è„šè¸å¤„å¾®å¾®å‰å€¾ï¼ˆ5-8Â°ï¼‰ï¼Œå¤´é¡¶å‘ä¸Šç‰µå¼•ï¼Œè„ŠæŸ±ä¿æŒä¸­ç«‹ä½ï¼Œä¸å¡Œè…°ã€ä¸å¼“èƒŒã€ä¸å·¦å³æ‰­è½¬ï¼›æ ¸å¿ƒå…¨ç¨‹ä¿æŒä¸­ç­‰æ”¶ç´§çŠ¶æ€ï¼Œå½¢æˆç¨³å®šçš„"åˆšæ€§åœ†æŸ±ä½“"',
    biomechanics: 'ä¸­ç«‹èº¯å¹²+ç¨³å®šæ ¸å¿ƒï¼Œèƒ½æœ€å¤§åŒ–å‡å°‘ä¸Šä¸‹è‚¢çš„èƒ½é‡å†…è€—ï¼Œé¿å…èº«ä½“æ™ƒåŠ¨é€ æˆçš„åŠ¨åŠ›æµå¤±ï¼ŒåŒæ—¶é™ä½è…°æ¤ã€éª¨ç›†çš„è´Ÿè·ï¼Œè®©ä¸‹è‚¢å‘åŠ›ç›´æ¥ã€é«˜æ•ˆåœ°è½¬åŒ–ä¸ºå‘å‰çš„åŠ¨èƒ½'
  },
  {
    icon: 'ğŸ’ª',
    title: 'ä¸ŠåŠèº«ä¸æ‘†è‡‚',
    standard: 'åŒè‚©æ”¾æ¾ä¸‹æ²‰ï¼Œä¸è€¸è‚©ã€ä¸å«èƒ¸ï¼›æ‰‹è‚˜å›ºå®š90Â°å·¦å³å¼¯æ›²ï¼Œä¸¥æ ¼æ²¿å‰åæ–¹å‘æ‘†è‡‚ï¼Œæ‘†å¹…å‰ä¸è¶…è‚©ã€åä¸è¶…è…°ï¼Œå…¨ç¨‹ä¸è¶Šè¿‡èº«ä½“ä¸­çº¿ï¼›åŒæ‰‹åŠæ¡æ‹³ï¼Œä¸ç´§ç»·å‘åŠ›',
    biomechanics: 'æ­£ç¡®æ‘†è‡‚èƒ½å¹³è¡¡ä¸‹è‚¢çš„æ‰­è½¬åŠ›ï¼Œç»´æŒèº«ä½“å¹³è¡¡ï¼ŒåŒæ—¶ä¸ºè·‘æ­¥æä¾›è¾…åŠ©åŠ¨åŠ›ï¼›å·¦å³æ¨ªæ‘†ã€è€¸è‚©å«èƒ¸ä¼šé€ æˆé¢å¤–èƒ½é‡æ¶ˆè€—ï¼Œè¿˜ä¼šé™åˆ¶èƒ¸è…”æ‰©å¼ ï¼Œç›´æ¥é™ä½å‘¼å¸ä¸ä¾›æ°§æ•ˆç‡'
  },
  {
    icon: 'ğŸ¦µ',
    title: 'ä¸‹è‚¢æ‘†åŠ¨',
    standard: 'å¤§è…¿å‰æ‘†å¹…åº¦é€‚ä¸­ï¼Œå°è…¿è‡ªç„¶æŠ˜å ï¼Œè„šè·Ÿå‘è‡€éƒ¨æ–¹å‘é è¿‘ï¼Œä¸åˆ»æ„è¹¬ä¼¸ã€ä¸ç”©å°è…¿ï¼›è†ç›–å§‹ç»ˆä¸è„šå°–æ–¹å‘ä¸€è‡´ï¼Œæœå‘æ­£å‰æ–¹',
    biomechanics: 'å°è…¿æŠ˜å èƒ½ç¼©çŸ­ä¸‹è‚¢æ‘†åŠ¨åŠå¾„ï¼Œå‡å°‘è½¬åŠ¨æƒ¯é‡ï¼Œè®©æ‘†è…¿æ›´çœåŠ›ï¼›è†ç›–æœå‘ä¸€è‡´èƒ½é¿å…è†å…³èŠ‚æ‰¿å—ä¾§å‘å‰ªåˆ‡åŠ›ï¼Œå¤§å¹…é™ä½ä¼¤ç—…é£é™©ï¼ŒåŒæ—¶ä¿è¯å‘åŠ›æ–¹å‘å®Œå…¨å‘å‰'
  },
  {
    icon: 'ğŸ‘Ÿ',
    title: 'è§¦åœ°æ¨¡å¼',
    standard: 'è½åœ°ç‚¹åœ¨èº«ä½“é‡å¿ƒçš„æ­£ä¸‹æ–¹ï¼ˆæˆ–ç•¥å¾®é å‰ï¼‰ï¼Œé‡‡ç”¨ä¸­è¶³/å…¨æŒæ»šåŠ¨å¼è§¦åœ°ï¼›è§¦åœ°æ—¶è„šè¸ã€è†ç›–ä¿æŒå¾®å±ˆï¼Œå®ç°è‡ªç„¶ç¼“å†²ï¼›è§¦åœ°æ—¶é—´è¶ŠçŸ­è¶Šå¥½ï¼ˆå¤§ä¼—è·‘è€…æ§åˆ¶åœ¨200-250msï¼‰',
    biomechanics: 'é‡å¿ƒæ­£ä¸‹æ–¹è½åœ°ç‚¹èƒ½å½»åº•é¿å…"åˆ¹è½¦æ•ˆåº”"ï¼Œå‡å°‘æ°´å¹³æ–¹å‘çš„åŠ¨èƒ½æŸè€—ï¼›æ»šåŠ¨å¼è§¦åœ°èƒ½æœ€å¤§åŒ–åˆ©ç”¨è·Ÿè…±çš„å¼¹æ€§åŠ¿èƒ½ï¼Œå‡å°‘è‚Œè‚‰ä¸»åŠ¨å‘åŠ›ï¼ŒåŒæ—¶åˆ†æ•£è¶³åº•ã€è†å…³èŠ‚çš„å†²å‡»è´Ÿè·'
  },
  {
    icon: 'âš¡',
    title: 'æ­¥é¢‘æ­¥å¹…',
    standard: 'å¤§ä¼—è·‘è€…æ­¥é¢‘ç¨³å®šåœ¨170-180æ­¥/åˆ†é’Ÿï¼Œç²¾è‹±è·‘è€…180+æ­¥/åˆ†é’Ÿï¼›æ­¥å¹…ä¸èº«é«˜ã€è‚ŒåŠ›åŒ¹é…ï¼Œä¸åˆ»æ„è¿½æ±‚å¤§æ­¥å¹…ï¼Œæ­¥å¹…å¢é•¿æ¥è‡ªå‘åŠ›æ•ˆç‡æå‡ï¼Œè€Œéåˆ»æ„å‰ä¼¸å°è…¿',
    biomechanics: 'é«˜é¢‘å°å¹…çš„æ¨¡å¼èƒ½é™ä½å‚ç›´æŒ¯å¹…ï¼ˆæ§åˆ¶åœ¨5-7cmä»¥å†…ï¼‰ï¼Œå‡å°‘è§¦åœ°æ—¶çš„åœ°é¢å†²å‡»åŠ›ï¼ŒåŒæ—¶é™ä½å•æ­¥çš„èƒ½é‡æ¶ˆè€—ï¼Œæå‡åŠ¨ä½œçš„å¯æŒç»­æ€§ï¼Œæ˜¯å¤§ä¼—è·‘è€…æå‡è·‘æ­¥ç»æµæ€§æœ€æ˜“è½åœ°çš„æ–¹å¼'
  }
]

// 6å¤§é”™è¯¯è·‘å§¿ç±»å‹
const errorTypes = [
  {
    id: 'braking',
    icon: 'ğŸ›‘',
    name: 'è·¨æ­¥åˆ¹è½¦å‹è·‘å§¿',
    shortDesc: 'æœ€å¸¸è§ã€æœ€å½±å“ç»æµæ€§çš„é”™è¯¯',
    risk: 'high',
    riskText: 'é«˜é£é™©',
    symptoms: ['è½åœ°ç‚¹åœ¨é‡å¿ƒå‰æ–¹', 'æ­¥é¢‘<165', 'è§¦åœ°æ—¶é—´>280ms']
  },
  {
    id: 'instability',
    icon: 'ğŸŒŠ',
    name: 'æ ¸å¿ƒå¤±ç¨³å‹è·‘å§¿',
    shortDesc: 'æ‰€æœ‰è·‘å§¿é—®é¢˜çš„åº•å±‚æ ¹æº',
    risk: 'high',
    riskText: 'é«˜é£é™©',
    symptoms: ['å¡Œè…°å¼“èƒŒ', 'èº«ä½“å·¦å³æ™ƒåŠ¨', 'æ­¥å¹…ä¸å¯¹ç§°']
  },
  {
    id: 'knee',
    icon: 'ğŸ¦´',
    name: 'è†ç›–å†…æ‰£/å¤–æ’‡å‹è·‘å§¿',
    shortDesc: 'æœ€é«˜ä¼¤ç—…é£é™©çš„é”™è¯¯',
    risk: 'high',
    riskText: 'é«˜é£é™©',
    symptoms: ['è†ç›–å†…æ‰£/å¤–æ’‡', 'ä¸è„šå°–æ–¹å‘ä¸ä¸€è‡´', 'åŒè…¿å‘ˆX/Oå‹']
  },
  {
    id: 'upper',
    icon: 'ğŸ™…',
    name: 'ä¸ŠåŠèº«ä»£å¿å‹è·‘å§¿',
    shortDesc: 'æœ€å®¹æ˜“è¢«å¿½ç•¥çš„èƒ½è€—å¤§æˆ·',
    risk: 'medium',
    riskText: 'ä¸­é£é™©',
    symptoms: ['å«èƒ¸é©¼èƒŒ', 'è€¸è‚©', 'æ‘†è‡‚æ¨ªæ‘†']
  },
  {
    id: 'bouncing',
    icon: 'ğŸ¦˜',
    name: 'è¿‡åº¦è¹¬åœ°/å‚ç›´æŒ¯å¹…è¿‡å¤§',
    shortDesc: 'æœ€è´¹åŠ›çš„"é¢ ç°¸è·‘"',
    risk: 'medium',
    riskText: 'ä¸­é£é™©',
    symptoms: ['å‚ç›´æŒ¯å¹…>8cm', 'åˆ»æ„å‘ä¸Šè¹¬åœ°', 'å°è…¿è¿‡åº¦å‘åŠ›']
  },
  {
    id: 'foot',
    icon: 'ğŸ¦¶',
    name: 'è¶³å‹ä»£å¿å‹è·‘å§¿',
    shortDesc: 'è¶³å†…ç¿»/å¤–ç¿»ï¼Œåº•å±‚ç»“æ„é—®é¢˜',
    risk: 'medium',
    riskText: 'ä¸­é£é™©',
    symptoms: ['è¶³è¿‡åº¦å†…ç¿»/å¤–ç¿»', 'è¶³åº•å‹åŠ›ä¸å‡', 'å·¦å³å¹³è¡¡åå·®>3%']
  }
]

// é»„é‡‘åŸåˆ™
const goldenPrinciples = [
  {
    title: 'è‚ŒåŠ›å…ˆè¡Œï¼ŒåŠ¨ä½œåœ¨å',
    desc: '90%çš„è·‘å§¿é”™è¯¯ï¼Œæ ¹æºéƒ½æ˜¯ç›¸å…³è‚Œç¾¤åŠ›é‡ä¸è¶³ï¼Œè€ŒéåŠ¨ä½œä¸å¯¹ã€‚å…ˆå¼ºåŒ–æ ¸å¿ƒã€è‡€éƒ¨ã€ä¸‹è‚¢ã€è„šè¸çš„åŸºç¡€åŠ›é‡ï¼Œå†è°ƒæ•´åŠ¨ä½œï¼Œå¦åˆ™å¼ºè¡Œæ”¹åŠ¨ä½œåªä¼šå¯¼è‡´æ–°çš„ä»£å¿å’Œä¼¤ç—…'
  },
  {
    title: 'å¾ªåºæ¸è¿›ï¼Œå°æ­¥è°ƒæ•´',
    desc: 'è·‘å§¿æ˜¯é•¿æœŸå½¢æˆçš„è‚Œè‚‰è®°å¿†ï¼Œæ¯æ¬¡è°ƒæ•´åªæ”¹1ä¸ªæ ¸å¿ƒåŠ¨ä½œï¼ˆæ¯”å¦‚å…ˆææ­¥é¢‘ï¼Œå†æ”¹è½åœ°ç‚¹ï¼‰ï¼Œä¸è¦ä¸€æ¬¡æ€§å…¨æ”¹ï¼Œç»™èº«ä½“è‡³å°‘2-4å‘¨çš„é€‚åº”æ—¶é—´ï¼Œé¿å…å—ä¼¤'
  },
  {
    title: 'ä¸ç›²ç›®æ¨¡ä»¿ç²¾è‹±è·‘è€…',
    desc: 'ç²¾è‹±è·‘è€…çš„å‰æŒè·‘æ³•ã€å¤§æ­¥å¹…ï¼Œå»ºç«‹åœ¨æå¼ºçš„è‚ŒåŠ›ã€æŸ”éŸ§æ€§ã€å¿ƒè‚ºèƒ½åŠ›ä¹‹ä¸Šï¼Œå¤§ä¼—è·‘è€…ç›²ç›®æ¨¡ä»¿ï¼Œåªä¼šå¯¼è‡´ä¼¤ç—…å’Œèƒ½è€—å¢åŠ '
  },
  {
    title: 'ç»æµæ€§ä¼˜å…ˆï¼Œç¾è§‚å…¶æ¬¡',
    desc: 'è·‘å§¿çš„æ ¸å¿ƒç›®æ ‡æ˜¯çœåŠ›ã€ä½ä¼¤ã€å¯æŒç»­ï¼Œä¸æ˜¯å¥½çœ‹ã€‚åªè¦è·‘æ­¥æ—¶æ— ç–¼ç—›ã€é…é€Ÿç¨³å®šã€å¿ƒç‡å¹³ç¨³ã€é•¿è·ç¦»ä¸æ‰é€Ÿï¼Œå°±æ˜¯é€‚åˆä½ çš„ç»æµè·‘å§¿'
  },
  {
    title: 'é•¿æœŸåšæŒï¼ŒåŠ¨æ€è°ƒæ•´',
    desc: 'è·‘å§¿ä¼˜åŒ–éœ€è¦3-6ä¸ªæœˆçš„æŒç»­è®­ç»ƒæ‰èƒ½å½¢æˆç¨³å®šçš„è‚Œè‚‰è®°å¿†ï¼›åŒæ—¶éšç€ä½ çš„è‚ŒåŠ›ã€é…é€Ÿã€è·‘é‡æå‡ï¼Œè·‘å§¿ä¹Ÿè¦åŠ¨æ€è°ƒæ•´ï¼Œå»ºè®®æ¯3ä¸ªæœˆåš1æ¬¡å®Œæ•´çš„è·‘å§¿åˆ†æï¼ŒåŠæ—¶çº æ­£é—®é¢˜'
  }
]

// åˆ†æè·‘å§¿
const analyzePosture = () => {
  if (!assessment.painLocation || !assessment.cadence || !assessment.feeling || !assessment.longRun) {
    alert('è¯·å®Œæˆæ‰€æœ‰é—®é¢˜çš„é€‰æ‹©')
    return
  }

  const results = []

  // æ ¹æ®é€‰æ‹©åŒ¹é…è·‘å§¿é—®é¢˜
  if (assessment.painLocation === 'shin' || assessment.cadence === 'low') {
    results.push({
      id: 'braking',
      icon: 'ğŸ›‘',
      name: 'è·¨æ­¥åˆ¹è½¦å‹è·‘å§¿',
      matchRate: 90,
      matchReason: 'å°è…¿å‰ä¾§é…¸ç—›+æ­¥é¢‘è¿‡ä½'
    })
  }

  if (assessment.painLocation === 'waist' || assessment.feeling === 'unstable' || assessment.longRun === 'form') {
    results.push({
      id: 'instability',
      icon: 'ğŸŒŠ',
      name: 'æ ¸å¿ƒå¤±ç¨³å‹è·‘å§¿',
      matchRate: 88,
      matchReason: 'è…°è…¹é…¸ç—›+èº«ä½“æ™ƒåŠ¨+ååŠç¨‹è·‘å§¿å˜å½¢'
    })
  }

  if (assessment.painLocation === 'knee') {
    results.push({
      id: 'knee',
      icon: 'ğŸ¦´',
      name: 'è†ç›–å†…æ‰£/å¤–æ’‡å‹è·‘å§¿',
      matchRate: 92,
      matchReason: 'è†ç›–å†…ä¾§ç–¼ç—›'
    })
  }

  if (assessment.painLocation === 'shoulder' || assessment.feeling === 'tense') {
    results.push({
      id: 'upper',
      icon: 'ğŸ™…',
      name: 'ä¸ŠåŠèº«ä»£å¿å‹è·‘å§¿',
      matchRate: 85,
      matchReason: 'è‚©é¢ˆé…¸ç—›+ä¸ŠåŠèº«ç´§ç»·'
    })
  }

  if (assessment.feeling === 'bumpy') {
    results.push({
      id: 'bouncing',
      icon: 'ğŸ¦˜',
      name: 'è¿‡åº¦è¹¬åœ°/å‚ç›´æŒ¯å¹…è¿‡å¤§',
      matchRate: 87,
      matchReason: 'èº«ä½“ä¸Šä¸‹é¢ ç°¸ä¸¥é‡'
    })
  }

  if (assessment.painLocation === 'foot') {
    results.push({
      id: 'foot',
      icon: 'ğŸ¦¶',
      name: 'è¶³å‹ä»£å¿å‹è·‘å§¿',
      matchRate: 89,
      matchReason: 'è¶³åº•/è¶³è·Ÿç–¼ç—›'
    })
  }

  // å¦‚æœæ²¡æœ‰åŒ¹é…åˆ°ï¼Œæ¨èæœ€å¸¸è§çš„è·¨æ­¥åˆ¹è½¦
  if (results.length === 0) {
    results.push({
      id: 'braking',
      icon: 'ğŸ›‘',
      name: 'è·¨æ­¥åˆ¹è½¦å‹è·‘å§¿',
      matchRate: 70,
      matchReason: 'å»ºè®®ä¼˜å…ˆæ’æŸ¥è·¨æ­¥åˆ¹è½¦é—®é¢˜'
    })
  }

  // æŒ‰åŒ¹é…åº¦æ’åº
  results.sort((a, b) => b.matchRate - a.matchRate)

  analysisResult.value = results
}

// è·³è½¬åˆ°è¯¦æƒ…é¡µ
const goToDetail = (id) => {
  router.push(`/advance-marathon/running-posture/${id}`)
}
</script>

<style scoped>
.running-posture-home {
  min-height: 100vh;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  padding: 2rem 0;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  background: white;
  border-radius: 12px;
  padding: 2rem;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
}

/* è¿”å›å¯¼èˆª */
.back-nav {
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid #eee;
}

.back-link {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  color: #667eea;
  text-decoration: none;
  font-size: 0.95rem;
  font-weight: 500;
  transition: all 0.3s ease;
}

.back-link:hover {
  color: #5a6fd8;
  transform: translateX(-4px);
}

.back-icon {
  font-size: 1.2rem;
}

/* é¡µé¢æ ‡é¢˜ */
.page-title {
  text-align: center;
  color: #333;
  margin-bottom: 0.5rem;
  font-size: 1.8rem;
}

.page-subtitle {
  text-align: center;
  color: #666;
  margin-bottom: 2rem;
  font-size: 0.95rem;
}

/* é€šç”¨åŒºå—æ ·å¼ */
.section-title {
  color: #667eea;
  margin-bottom: 1rem;
  font-size: 1.2rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.section-icon {
  font-size: 1.3rem;
}

.section-desc {
  color: #999;
  font-size: 0.9rem;
  margin-bottom: 1.5rem;
}

/* æ ¸å¿ƒå®šä¹‰å¡ç‰‡ */
.definition-card {
  background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
  border-radius: 12px;
  padding: 1.5rem;
  margin-bottom: 2rem;
  border: 1px solid #667eea30;
  display: flex;
  gap: 1rem;
  align-items: flex-start;
}

.definition-icon {
  font-size: 2rem;
  flex-shrink: 0;
}

.definition-content h3 {
  color: #333;
  margin-bottom: 0.5rem;
  font-size: 1.1rem;
}

.definition-content p {
  color: #666;
  font-size: 0.9rem;
  line-height: 1.6;
  margin: 0;
}

.highlight {
  color: #667eea;
  font-weight: 600;
}

/* é»„é‡‘æ ‡å‡†ç½‘æ ¼ */
.standards-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 1rem;
  margin-bottom: 2rem;
}

.standard-card {
  background: #f9f9f9;
  border-radius: 10px;
  padding: 1.25rem;
  border: 1px solid #eee;
}

.standard-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 1rem;
}

.standard-icon {
  font-size: 1.5rem;
}

.standard-header h3 {
  color: #333;
  font-size: 1rem;
  margin: 0;
}

.standard-body h4 {
  color: #667eea;
  font-size: 0.85rem;
  margin-bottom: 0.5rem;
}

.standard-body p {
  color: #666;
  font-size: 0.85rem;
  line-height: 1.5;
  margin-bottom: 0.75rem;
}

.core-standard {
  margin-bottom: 1rem;
}

.biomechanics {
  background: white;
  padding: 0.75rem;
  border-radius: 6px;
}

/* è¯„ä¼°åŒºå— */
.assessment-section {
  background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
  border-radius: 12px;
  padding: 1.5rem;
  margin-bottom: 2rem;
  border: 1px solid #667eea30;
}

.assessment-form {
  background: white;
  border-radius: 10px;
  padding: 1.5rem;
}

.question-group {
  margin-bottom: 1.5rem;
}

.question-title {
  color: #333;
  font-size: 1rem;
  margin-bottom: 0.75rem;
  font-weight: 600;
}

.options {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.option-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem;
  background: #f9f9f9;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.option-item:hover {
  background: #f0f0f0;
}

.option-item input[type="radio"] {
  width: 18px;
  height: 18px;
  accent-color: #667eea;
}

.option-item span {
  color: #333;
  font-size: 0.9rem;
}

.btn-analyze {
  width: 100%;
  padding: 1rem;
  font-size: 1.1rem;
  margin-top: 1rem;
}

/* åˆ†æç»“æœ */
.analysis-result {
  margin-top: 1.5rem;
  background: white;
  border-radius: 10px;
  padding: 1.5rem;
}

.result-title {
  color: #333;
  font-size: 1.1rem;
  margin-bottom: 1rem;
  text-align: center;
}

.result-list {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.result-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem;
  background: #f9f9f9;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid transparent;
}

.result-item:hover {
  border-color: #667eea;
  background: #f8f9ff;
}

.result-icon {
  font-size: 1.5rem;
}

.result-info {
  flex: 1;
}

.result-info h4 {
  color: #333;
  margin-bottom: 0.25rem;
  font-size: 1rem;
}

.result-info p {
  color: #666;
  font-size: 0.8rem;
  margin: 0;
}

.match-rate {
  background: #667eea;
  color: white;
  padding: 0.25rem 0.75rem;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 500;
}

.arrow {
  color: #667eea;
  font-size: 1.2rem;
}

/* è‡ªæµ‹æ–¹æ³• */
.selftest-section {
  margin-bottom: 2rem;
}

.steps-container {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1rem;
}

@media (max-width: 992px) {
  .steps-container {
    grid-template-columns: 1fr;
  }
}

.step-card {
  background: #f9f9f9;
  border-radius: 10px;
  padding: 1.5rem;
  border-left: 4px solid #667eea;
}

.step-number {
  width: 36px;
  height: 36px;
  background: #667eea;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 1.1rem;
  margin-bottom: 0.75rem;
}

.step-card h3 {
  color: #333;
  font-size: 1.1rem;
  margin-bottom: 0.25rem;
}

.step-desc {
  color: #667eea;
  font-size: 0.85rem;
  margin-bottom: 1rem;
}

.step-detail {
  background: white;
  padding: 1rem;
  border-radius: 8px;
}

.step-detail p {
  color: #666;
  font-size: 0.85rem;
  line-height: 1.6;
  margin-bottom: 1rem;
}

.check-items h4 {
  color: #333;
  font-size: 0.9rem;
  margin-bottom: 0.5rem;
}

.check-items ul {
  margin: 0;
  padding-left: 1.25rem;
}

.check-items li {
  color: #666;
  font-size: 0.85rem;
  margin: 0.5rem 0;
  line-height: 1.5;
}

.check-items li strong {
  color: #667eea;
}

/* é”™è¯¯ç±»å‹ç½‘æ ¼ */
.errors-section {
  margin-bottom: 2rem;
}

.errors-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 1rem;
}

.error-card {
  background: #f9f9f9;
  border-radius: 10px;
  padding: 1.25rem;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 1px solid #eee;
  position: relative;
}

.error-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
  border-color: #667eea;
}

.error-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.75rem;
}

.error-icon {
  font-size: 1.5rem;
}

.error-header h3 {
  flex: 1;
  color: #333;
  font-size: 1rem;
  margin: 0;
}

.risk-badge {
  padding: 0.2rem 0.5rem;
  border-radius: 20px;
  font-size: 0.7rem;
}

.risk-badge.high {
  background: #f44336;
  color: white;
}

.risk-badge.medium {
  background: #ff9800;
  color: white;
}

.error-short-desc {
  color: #666;
  font-size: 0.85rem;
  margin-bottom: 0.75rem;
  line-height: 1.5;
}

.error-symptoms {
  font-size: 0.8rem;
  color: #888;
}

.error-symptoms strong {
  color: #555;
}

.symptom-tag {
  display: inline-block;
  background: #e0e0e0;
  color: #666;
  padding: 0.15rem 0.5rem;
  border-radius: 4px;
  margin: 0.25rem 0.25rem 0 0;
  font-size: 0.75rem;
}

.card-arrow {
  position: absolute;
  right: 1rem;
  top: 50%;
  transform: translateY(-50%);
  color: #667eea;
  font-size: 1.2rem;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.error-card:hover .card-arrow {
  opacity: 1;
}

/* é»„é‡‘åŸåˆ™ */
.principles-section {
  margin-bottom: 1rem;
}

.principles-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.principle-item {
  display: flex;
  gap: 1rem;
  padding: 1rem;
  background: #fff8e1;
  border-radius: 8px;
  border-left: 4px solid #ffc107;
}

.principle-number {
  width: 28px;
  height: 28px;
  background: #ffc107;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 0.9rem;
  flex-shrink: 0;
}

.principle-content h4 {
  color: #333;
  margin-bottom: 0.25rem;
  font-size: 1rem;
}

.principle-content p {
  color: #666;
  font-size: 0.85rem;
  line-height: 1.5;
  margin: 0;
}

/* æŒ‰é’® */
.btn {
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 6px;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.btn-primary {
  background: #667eea;
  color: white;
}

.btn-primary:hover {
  background: #5a6fd8;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
}

/* å“åº”å¼ */
@media (max-width: 768px) {
  .container {
    margin: 0 1rem;
    padding: 1.5rem;
  }

  .standards-grid {
    grid-template-columns: 1fr;
  }

  .errors-grid {
    grid-template-columns: 1fr;
  }

  .definition-card {
    flex-direction: column;
  }

  .card-arrow {
    display: none;
  }
}
</style>